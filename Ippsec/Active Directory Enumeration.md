# Nmap
```sh
nmap -sC -sV -oA <DIR> <IP>
```

# CrackMapExec
A swiss army knife for pentesting networks
## SMB
Basically a shared folder over the network
#### Shares enumeration
```sh
# test for anonymous or empty creds
cme smb <IP> --shares
cme smb <IP> -u '' --shares
cme smb <IP> -u '' -p '' --shares

# list available shares
cme smb <IP> -u 'USERNAME' -p 'PASSWORD' --shares 
smbclient -L //<IP>

# crawl and extract the shares recursively
cme smb <IP> -u 'USERNAME' -p 'PASSWORD' -M spider_plus 
```

### Test credential(s)
**[ ! ] Warning**: always check for password policy to avoid accounts getting locked out before executing any brute force  
`cme smb <IP> --pass-policy`
```sh
cme smb <IP> -u <USERNAMES.txt> -p <PASSWORDS.txt>
cme smb <IP> -u '<USERNAME>' -p '<PASSWORD>' 
``` 

### Mounting smb to linux
```sh
sudo mkdir /mnt/<FOLDER>
sudo mount -t cifs -o 'user=<USERNAME>,password=<PASSWORD>' //<IP> /mnt/<FOLDER>
```

## WinRM
Windows's equivalent of SSH
### Test credential(s) 
```sh
cme winrm <IP> -u '<USERNAME>' -p '<PASSWORD>' 
cme winrm <IP> -u <usernames.list> -p <passwords.list>
```

### Connect with Evil-WinRM
```sh
evil-winrm -i <IP> -u <USERNAME> -p <PASSWORD>
```

# RPCclient
connect to various rpc protocols/ports exists on the machine
### Connect 
```sh
rpcclient -U '' <IP>
```
### Commands
```sh
enumdomusers
querydispinfo
queryuser <RID>
```

# LDAPsearch
LDAP is a protocol that allows us query information about Active Directory, particularly the Objects within it.
### Prefix
always add this before running any of the commands shown below
```sh
ldapsearch -x -h <IP> 
```
### Commands
```sh
-s base namingcontexts
-s sub -b 'DC=<DOMAIN>,DC=<DOMAIN>' 
```